backend:
  name: git-gateway
  branch: main
  squash_merges: true

publish_mode: editorial_workflow
show_preview_links: true

media_folder: 'src/_assets/img'
public_folder: '/assets/img'

site_url: 'https://gameworkerscoalition.org'

collections:
  - label: 'Global Data'
    name: data
    editor:
      preview: false
    delete: false
    files:
      - label: 'Site Info'
        name: siteinfo
        file: 'src/_data/siteinfo.yaml'
        fields:
          - { label: 'Title', name: title, widget: string }
          - { label: 'Url', name: url, widget: string }
      - label: 'Organizations'
        name: orgs
        file: 'src/_data/orgs.yaml'
        fields:
          - label: 'Regions'
            name: regions
            widget: list
            summary: '{{fields.name}}: {{fields.orgs.length}} orgs'
            fields:
              - label: 'Region tag'
                name: name
                widget: select
                options: ['africa', 'asia', 'na', 'sa', 'europe', 'oceania']
              - label: 'Region orgs'
                name: orgs
                widget: list
                summary: '{{fields.name}} ({{fields.link}})'
                fields:
                  - { label: 'Organization name', name: name, widget: string }
                  - {
                      label: 'Location',
                      name: location,
                      widget: string,
                      required: false,
                    }
                  - { label: 'Link', name: link, widget: string }

  - label: 'Language Data'
    name: lang
    editor:
      preview: false
    delete: false
    files:
      - label: 'English'
        name: data-en
        file: 'src/en/en.yaml'
        fields:
          - { label: 'lang', name: langtag, widget: hidden, default: 'en' }
          - { label: 'Site Description', name: sitedescription, widget: string }
          - label: 'Localized strings'
            name: i18n
            widget: list
            summary: '{{fields.key}}: {{fields.t}}'
            fields:
              - { label: 'Key', name: key, widget: string }
              - { label: 'Translation', name: t, widget: string }

  - label: 'Content: English'
    name: content-en
    folder: 'src/en/content'
    create: true
    fields:
      - { label: 'Content', name: body, widget: markdown }
